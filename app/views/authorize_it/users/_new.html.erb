<div class='modal fade' id='newUser' tabindex='-1' role='dialog' aria-labelledby='myModalLabel' aria-hidden='true'>
    <div class='modal-dialog'>
      <div class='modal-content'>
        <div class='modal-header'>
          <button type='button' class='close' data-dismiss='modal' aria-label='Close'>
            <span class='fa fa-times close_image'></span>
          </button>
          <h2 class='modal-title'>Create New User</h2>
          <div class="row">
            <div class="col-sm-12">
              <div id="form_error_messages"></div>
            </div>
          </div>
        </div>
        <%= form_for @user, url: authorize_it_users_path, id: 'new_user_form', method: :post, 'data-toggle': 'validator', role: 'form', remote: true do |f| %>
        <div class='modal-body'>
          <div class='box-body'>
            <div class="row">
              <div class = 'col-sm-6' id="_first_name">
                <div class='form-group has-feedback'>
                  <label for=''>First Name</label>
                  <%= f.text_field :first_name, class: 'form-control',  placeholder: 'First Name', 'data-error':'Enter your first name.', required: true%>
                  <span class="glyphicon form-control-feedback" aria-hidden="true"></span>
                  <span class="help-block with-errors">Hey look, this one has feedback icons!</span>
                </div>
              </div>
              <div class="col-sm-6" id="_last_name">
                <div class='form-group has-feedback'>
                  <label for=''>Last Name</label>
                  <%= f.text_field :last_name, class: 'form-control' , size: '3x6', 'data-error':'Last name is required.', required: true %>
                  <span class="glyphicon form-control-feedback" aria-hidden="true"></span>
                  <div class="help-block with-errors"></div>
                </div>
              </div>
            </div>
            <div class="row">
              <div class = 'col-sm-6' id="_username">
                <div class='form-group has-feedback'>
                  <label for=''>Username</label>
                  <%= f.text_field :username, class: 'form-control' , pattern: '^[a-z]\w+$', 'data-minlength': '6', 'data-error':'username is required.',required: true %>
                  <span class="glyphicon form-control-feedback" aria-hidden="true"></span>
                  <span class="help-block with-errors">Minimum of 6 characters</span>
                </div>
              </div>
              <div class="col-sm-6" id="_email">
                <div class='form-group has-feedback'>
                  <label for=''>Email</label>
                  <%= f.email_field :email, class: 'form-control', pattern: '^\w+@[a-zA-Z_]+?\.[a-zA-Z]{2,3}$', 'data-error':'Please enter valid email address', required: true %>
                  <span class="glyphicon form-control-feedback" aria-hidden="true"></span>
                  <div class="help-block with-errors"></div>
                </div>
              </div>
            </div>
            <div class="row">
              <div class = 'col-sm-6' id="_password">
                <div class='form-group has-feedback'>
                  <label for=''>Password</label>
                  <%= f.password_field :password, class: 'form-control' , 'data-minlength': '8', placeholder: 'Password', size: '3x6', 'data-error':'password is required.',required: true %>
                  <span class="glyphicon form-control-feedback" aria-hidden="true"></span>
                  <span class="help-block with-errors">Minimum of 8 characters</span>
                </div>
              </div>
              <div class="col-sm-6">
                <div class='form-group has-feedback'>
                  <label for=''>Confirm Password</label>
                  <%= f.password_field :password, id:'passwordConfirm', class: 'form-control' , 'data-minlength': '8', placeholder: 'Confirm password', size: '3x6', 'data-match':'#user_password', 'data-match-error':'password do not match', required: true %>
                  <span class="glyphicon form-control-feedback" aria-hidden="true"></span>
                  <span class="help-block with-errors">Minimum of 8 characters</span>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-sm-6">
                <div class='form-group has-feedback'>
                  <label for=''>Department</label>
                  <span class="glyphicon form-control-feedback" aria-hidden="true"></span>
                  <%= f.text_field :department, class: 'form-control'%>
                </div>
              </div>
              <div class="col-sm-6">
                <div class='form-group has-feedback'>
                  <label for=''></label>
                  <br/>
                  <label>
                    <%= f.check_box :admin, class: 'minimal'%>
                  </label>
                  <span><strong>&nbsp;&nbsp;Make user admin?</strong></span>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-sm-6">
                <div class='form-group has-feedback'>
                  <label for=''>Assign group</label>
                  <%= select_tag "group_id", options_from_collection_for_select(@groups, "id", "name"),  class:'form-control select2', include_blank: true, style:'width:100%;', required: true %>
                  <span class="help-block with-errors">Select a group from the list</span>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class='modal-footer'>
           <button type='button' class='btn btn-info pull-left' data-dismiss='modal'>Cancel</button>
           <%= f.submit 'Submit' , class: 'btn btn-primary' %>
        </div>
        <% end %>
      </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
  </div><!-- /.modal -->

<script type="text/javascript">
    $('#new_user').validator();
    $('input[type="checkbox"].flat-red, input[type="radio"].flat-red').iCheck({
        checkboxClass: 'icheckbox_flat-green',
        radioClass: 'iradio_flat-green'
    });
    $('input[type="checkbox"].minimal, input[type="radio"].minimal').iCheck({
        checkboxClass: 'icheckbox_minimal-blue',
        radioClass: 'iradio_minimal-blue'
    });
    $(".select2").select2({
        placeholder: "Select a group",
        allowClear: true
    });
</script>